import pandas as pd
import matplotlib.pyplot as plt
df = pd.read_csv('kc_house_data.csv',sep=',')

#df.head()
# Задача один
plt.hist(df['price'], bins=30, edgecolor='black')

plt.xlabel('Цена')
plt.ylabel('Частота')
plt.title('Распределение цен на недвижимость')

#Вывод:"Основное количество домов находиться в ценовой группе до одного миллиона"

plt.hist(df['sqft_living'], bins=30, edgecolor='black')

plt.xlabel('Квадратура жилой площади')
plt.ylabel('Частота')
plt.title('Распределение квадратуры жилой площади')
  
plt.show()

#Вывод:"Домов с квадратурой до 3000 основное количество"

plt.hist(df['yr_built'], bins=30, edgecolor='black')

plt.xlabel('Год постройки')
plt.ylabel('Частота')
plt.title('Распределение года постройки')

plt.show()

#Вывод:"Основное количество домов построено с 1950 по 2017"

#2 задача

with_view_count = df[df['waterfront'] == 1].shape[0]
without_view_count = df[df['waterfront'] == 0].shape[0]

labels = ['С видом на набережную', 'Без вида на набережную']
counts = [with_view_count, without_view_count]
plt.bar(labels, counts)

plt.xlabel('Наличие вида на набережную')
plt.ylabel('Количество домов')
plt.title('Распределение домов от наличия вида на набережную')

plt.show()

#Вывод:"без вида на набережную домов больше"

floors = df['floors']

plt.hist(floors, bins='auto', edgecolor='black')

plt.xlabel('Количество этажей')
plt.ylabel('Количество домов')
plt.title('Распределение этажей домов')

plt.show()

#Вывод:"Количество однаэтажных и двух этажных домов больше значительно"

import seaborn as sns

condition = df['condition']

sns.countplot(x=condition)

plt.xlabel('Состояние домов')
plt.ylabel('Количество домов')
plt.title('Распределение состояния домов')


plt.show()
#Вывод:"Количество домов с состоянием на три большенство"

#3 задача

living_area = df['sqft_living']
price = df['price']

plt.scatter(living_area, price)

plt.xlabel('Жилая площадь')
plt.ylabel('Цена недвижимости')
plt.title('Связь между жилой площадью и ценой недвижимости')

plt.show()

#Из графика можно сделать следующие выводы:

#Существует положительная связь между жилой площадью и стоимостью недвижимости. Чем больше жилая площадь, тем выше цена недвижимости.
#Однако есть некоторое количество домов с высокой ценой, но небольшой жилой площадью. Возможно, это связано с другими факторами, такими как расположение или дизайн дома.

#я решил сдесь использовать ящик с усами т.к на занятии вы сказали что он очень редко используеться ))
bedrooms = df['bedrooms']

sns.boxplot(x=bedrooms, y=price)

plt.xlabel('Количество спален')
plt.ylabel('Цена недвижимости')
plt.title('Распределение стоимости недвижимости в зависимости от количества спален')


plt.show()

#Из графика можно сделать следующие выводы:

#Общая тенденция показывает, что с увеличением количества спален растет и стоимость недвижимости.
#Однако есть некоторые выбросы, где недвижимость с небольшим количеством спален имеет высокую стоимость. Возможно, это связано с другими факторами, такими как общая площадь или качество отделки.

grouped_data = df.groupby('floors')['price'].mean().reset_index()

plt.bar(grouped_data['floors'], grouped_data['price'])
plt.xlabel('Этажи')
plt.ylabel('Средняя цена')
plt.title('зависимость этажей от цены')
plt.show()

#Вывод: на графике видно что среднии этажи занимают среднюю цену и их большинство

waterfront = df['waterfront']
count_by_waterfront = df.groupby(waterfront).size()
count_by_waterfront.plot(kind='pie', autopct='%1.1f%%')
plt.title('Соотношение недвижимости с видом на воду')

plt.show()

#Из графика можно сделать следующие выводы:
#Большинство недвижимости не имеет вид на воду (около 90%).
#Недвижимость с видом на воду составляет небольшую долю от общего числа объектов, но может иметь более высокую стоимость из-за привлекательности этой характеристики.


year_built = df['yr_built']
plt.hist(year_built, bins='auto', edgecolor='black')
plt.xlabel('Год постройки')
plt.ylabel('Количество домов')
plt.title('Распределение стоимости недвижимости в зависимости от года постройки')

plt.show()

#Из графика можно сделать следующие выводы:
#Распределение стоимости недвижимости в зависимости от года постройки неоднородно.
#Некоторые годы постройки имеют более высокую концентрацию дорогой недвижимости, в то время как другие годы имеют большее количество более доступных вариантов.
